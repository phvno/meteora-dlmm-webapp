var e,t;"function"==typeof(e=globalThis.define)&&(t=e,e=null),function(t,r,o,n,a){var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},s="function"==typeof i[n]&&i[n],l=s.cache||{},c="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function p(e,r){if(!l[e]){if(!t[e]){var o="function"==typeof i[n]&&i[n];if(!r&&o)return o(e,!0);if(s)return s(e,!0);if(c&&"string"==typeof e)return c(e);var a=Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}f.resolve=function(r){var o=t[e][1][r];return null!=o?o:r},f.cache={};var u=l[e]=new p.Module(e);t[e][0].call(u.exports,f,u,u.exports,this)}return l[e].exports;function f(e){var t=f.resolve(e);return!1===t?{}:p(t)}}p.isParcelRequire=!0,p.Module=function(e){this.id=e,this.bundle=p,this.exports={}},p.modules=t,p.cache=l,p.parent=s,p.register=function(e,r){t[e]=[function(e,t){t.exports=r},{}]},Object.defineProperty(p,"root",{get:function(){return i[n]}}),i[n]=p;for(var u=0;u<r.length;u++)p(r[u]);if(o){var f=p(o);"object"==typeof exports&&"undefined"!=typeof module?module.exports=f:"function"==typeof e&&e.amd?e(function(){return f}):a&&(this[a]=f)}}({"3OK12":[function(e,t,r){var o=e("~utils/constants"),n=e("~utils/logger"),a=e("~utils/solscan");let i=(0,n.createLogger)("ContentScript");i.info("Content script loaded");let s=new Set,l=!1;async function c(e,t){try{l=!0,s.clear(),i.info("Starting transaction search");let r=[];for(let n=1;n<=100;n++){i.debug(`Fetching page ${n}`);let s=await (0,a.fetchWithDelay)(e,n,t);if(null===s||"object"!=typeof s||!("success"in s)||"boolean"!=typeof s.success){i.warn(`Invalid response structure at page ${n}, stopping`);break}if(!s.data||!Array.isArray(s.data)||0===s.data.length){i.debug(`No more data at page ${n}, stopping`);break}let l=s.data.filter(e=>e&&"object"==typeof e&&"trans_id"in e);if(r.push(...l),s.data.length<o.PAGE_SIZE){i.debug(`Received ${s.data.length} items (less than page size ${o.PAGE_SIZE}), stopping`);break}}return i.info(`Found ${r.length} transactions`),r}catch(t){let e=t instanceof Error?t:Error(String(t));throw i.error("Error during transaction search",e),e}finally{l=!1}}chrome.runtime.onMessage.addListener((e,t,r)=>null!==e&&"object"==typeof e&&"type"in e&&"string"==typeof e.type?"ping"===e.type?(r({success:!0}),!0):"findLiquidityTransactions"===e.type?("poolAddress"in e&&"params"in e&&"string"==typeof e.poolAddress&&e.params&&"object"==typeof e.params?l?r({success:!1,error:"Already running"}):c(e.poolAddress,e.params).then(e=>{r({success:!0,data:e})}).catch(e=>{let t=e instanceof Error?e.message:String(e);r({success:!1,error:t})}):r({success:!1,error:"Invalid message parameters"}),!0):"fetchTransactionDetails"===e.type&&("transactionId"in e&&"string"==typeof e.transactionId?(0,a.fetchTransactionDetails)(e.transactionId).then(e=>{let t={success:!0,...e?{data:e}:{}};r(t)}).catch(e=>{let t=e instanceof Error?e.message:String(e);r({success:!1,error:t})}):r({success:!1,error:"Invalid transaction ID"}),!0):(i.warn("Received invalid message structure"),!1))},{"~utils/constants":"1c1lR","~utils/logger":"2yiHc","~utils/solscan":"iYdLu"}],"1c1lR":[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"SOLSCAN_BASE_URL",()=>n),o.export(r,"SOLSCAN_API_URL",()=>a),o.export(r,"METEORA_BASE_URL",()=>i),o.export(r,"METLEX_BASE_URL",()=>s),o.export(r,"LPAGENT_BASE_URL",()=>l),o.export(r,"METEORA_API_BASE_URL",()=>c),o.export(r,"JUP_BASE_URL",()=>p),o.export(r,"ALLOWED_API_HOSTS",()=>u),o.export(r,"PAGE_SIZE",()=>f),o.export(r,"BATCH_SIZE",()=>E),o.export(r,"MAX_CONCURRENT_REQUESTS",()=>d),o.export(r,"DELAY_MS",()=>g),o.export(r,"MAX_RETRIES",()=>_),o.export(r,"INITIAL_BACKOFF",()=>A),o.export(r,"MAX_FAILURES",()=>T),o.export(r,"METEORA_SEARCH_PER_PAGE",()=>R),o.export(r,"ACTIVITY_TOKEN_ADD_LIQ",()=>h),o.export(r,"ACTIVITY_TOKEN_REMOVE_LIQ",()=>S),o.export(r,"METEORA_API_KEY",()=>I),o.export(r,"SOLSCAN_REFERRER",()=>m),o.export(r,"METEORA_REFERRER",()=>O),o.export(r,"DEFAULT_HEADERS",()=>x),o.export(r,"METEORA_HEADERS",()=>L),o.export(r,"SOLSCAN_HEADERS",()=>y),o.export(r,"SOLANA_TX_ID_MIN_LENGTH",()=>N),o.export(r,"SOLANA_TX_ID_MAX_LENGTH",()=>U),o.export(r,"POOL_NAME_MAX_LENGTH",()=>w),o.export(r,"SANITIZED_KEY_MAX_LENGTH",()=>C),o.export(r,"BASE58_REGEX",()=>M),o.export(r,"POOL_NAME_REGEX",()=>$),o.export(r,"ISO_DATE_REGEX",()=>v),o.export(r,"POSITION_ACCOUNT_LABEL",()=>D),o.export(r,"SENDER_ACCOUNT_LABEL",()=>P),o.export(r,"POOL_RATIO_MIN",()=>b),o.export(r,"POOL_RATIO_MAX",()=>F),o.export(r,"POOL_SIZE_MIN",()=>j),o.export(r,"POOL_SIZE_MAX",()=>G),o.export(r,"POOL_NAME_INPUT_MAX_LENGTH",()=>B),o.export(r,"TAB_WAIT_TIMEOUT",()=>V),o.export(r,"TRANSACTION_STATUS_SUCCESS",()=>H),o.export(r,"TRANSACTION_STATUS_FAILED",()=>k),o.export(r,"POOL_STATUS_ACTIVE",()=>X),o.export(r,"POOL_STATUS_INACTIVE",()=>W),o.export(r,"POOL_STATUS_DEPRECATED",()=>Y),o.export(r,"POSITION_STATUS_ACTIVE",()=>K),o.export(r,"POSITION_STATUS_CLOSED",()=>q),o.export(r,"POSITION_STATUS_LIQUIDATED",()=>Z),o.export(r,"MESSAGE_TYPE_PING",()=>Q),o.export(r,"MESSAGE_TYPE_FIND_LIQUIDITY",()=>z),o.export(r,"MESSAGE_TYPE_FETCH_DETAILS",()=>J),o.export(r,"DEFAULT_FROM_TIME",()=>er),o.export(r,"DEFAULT_TO_TIME",()=>en),o.export(r,"getSolscanAccountUrl",()=>ea),o.export(r,"getSolscanTxUrl",()=>ei),o.export(r,"getMeteoraDlmmUrl",()=>es),o.export(r,"getSolscanApiUrl",()=>el),o.export(r,"getMetlexUrl",()=>ec),o.export(r,"getLpagentUrl",()=>ep),o.export(r,"getMeteoraWalletEarningInPair",()=>eu),o.export(r,"getJupPorfolioUrl",()=>ef),o.export(r,"formatAddress",()=>eE);let n="https://solscan.io",a="https://api-v2.solscan.io",i="https://www.meteora.ag",s="https://www.metlex.io/pnl2",l="https://app.lpagent.io",c="https://dlmm-api.meteora.ag",p="https://jup.ag",u=["api-v2.solscan.io","www.meteora.ag","dlmm-api.meteora.ag"],f=100,E=10,d=20,g=3e3,_=3,A=1e3,T=5,R=250,h="ACTIVITY_TOKEN_ADD_LIQ",S="ACTIVITY_TOKEN_REMOVE_LIQ",I="ilovemteora",m="https://solscan.io/",O="https://www.meteora.ag/",x={accept:"application/json, text/plain, */*","accept-language":"en-US,en;q=0.9,vi;q=0.8","cache-control":"no-cache",pragma:"no-cache",priority:"u=1, i","sec-ch-ua":'"Chromium";v="136", "Microsoft Edge";v="136", "Not.A/Brand";v="99"',"sec-ch-ua-mobile":"?0","sec-ch-ua-platform":'"Windows"',"sec-fetch-dest":"empty"},L={...x,"sec-fetch-mode":"cors","sec-fetch-site":"same-origin","x-api-key":I,Referer:O},y={...x,referrer:m},N=87,U=88,w=50,C=100,M=/^[1-9A-HJ-NP-Za-km-z]{87,88}$/,$=/^[a-zA-Z0-9-]{1,50}$/,v=/^\d{4}-\d{2}-\d{2}$/,D="position",P="sender",b=0,F=100,j=1,G=400,B=50,V=1e3,H="success",k="failed",X="active",W="inactive",Y="deprecated",K="active",q="closed",Z="liquidated",Q="ping",z="findLiquidityTransactions",J="fetchTransactionDetails",ee=new Date,et=new Date(Date.UTC(ee.getUTCFullYear(),ee.getUTCMonth(),ee.getUTCDate())),er=Math.floor(et.getTime()/1e3),eo=new Date(Date.UTC(ee.getUTCFullYear(),ee.getUTCMonth(),ee.getUTCDate(),23,59,59,999)),en=Math.floor(eo.getTime()/1e3),ea=e=>`${n}/account/${e}`,ei=e=>`${n}/tx/${e}`,es=e=>`${i}/dlmm/${e}`,el=e=>`${a}${e}`,ec=e=>`${s}/${e}`,ep=e=>`${l}/portfolio?address=${e}`,eu=(e,t)=>`${c}/wallet/${e}/${t}/earning`,ef=e=>`${p}/portfolio/${e}`;function eE(e){return e?e.length<=9?e:`${e.slice(0,4)}...${e.slice(-2)}`:"-"}},{"@parcel/transformer-js/src/esmodule-helpers.js":"cHUbl"}],cHUbl:[function(e,t,r){r.interopDefault=function(e){return e&&e.__esModule?e:{default:e}},r.defineInteropFlag=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.exportAll=function(e,t){return Object.keys(e).forEach(function(r){"default"===r||"__esModule"===r||t.hasOwnProperty(r)||Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[r]}})}),t},r.export=function(e,t,r){Object.defineProperty(e,t,{enumerable:!0,get:r})}},{}],"2yiHc":[function(e,t,r){var o,n,a=e("@parcel/transformer-js/src/esmodule-helpers.js");a.defineInteropFlag(r),a.export(r,"LogLevel",()=>n),a.export(r,"logger",()=>l),a.export(r,"createLogger",()=>c),a.export(r,"logApiRequest",()=>p),a.export(r,"logApiResponse",()=>u),a.export(r,"logPerformance",()=>f),(o=n||(n={}))[o.DEBUG=0]="DEBUG",o[o.INFO=1]="INFO",o[o.WARN=2]="WARN",o[o.ERROR=3]="ERROR";let i={level:n.INFO,includeTimestamp:!0,includeStackTrace:!0,prefix:"[Meteora Tools]"};class s{constructor(e={}){this.config={...i,...e}}setLevel(e){this.config.level=e}debug(e,t){this.config.level<=n.DEBUG&&this.log("DEBUG",e,t)}info(e,t){this.config.level<=n.INFO&&this.log("INFO",e,t)}warn(e,t){this.config.level<=n.WARN&&this.log("WARN",e,t)}error(e,t,r){if(this.config.level<=n.ERROR){let o={...r,...t&&{errorName:t.name,errorMessage:t.message,...this.config.includeStackTrace&&{stack:t.stack}}};this.log("ERROR",e,o)}}log(e,t,r){let o=this.config.includeTimestamp?new Date().toISOString():null,n=[this.config.prefix,o&&`[${o}]`,`[${e}]`,t].filter(Boolean),a=n.join(" "),i=this.getConsoleMethod(e);r&&Object.keys(r).length>0?i(a,r):i(a)}getConsoleMethod(e){if(this.config.level>n.DEBUG)return(e,...t)=>{};switch(e){case"DEBUG":return console.debug.bind(console);case"INFO":return console.info.bind(console);case"WARN":return console.warn.bind(console);case"ERROR":return console.error.bind(console);default:return console.log.bind(console)}}}let l=new s;function c(e,t){return new s({...t,prefix:`[Meteora Tools:${e}]`})}function p(e,t="GET",r){l.debug(`API Request: ${t} ${e}`,r)}function u(e,t,r){let o=`API Response: ${t} ${e}`;t>=400?l.error(o,void 0,r):t>=300?l.warn(o,r):l.debug(o,r)}function f(e,t,r){l.info(`Performance: ${e} completed in ${t}ms`,r)}},{"@parcel/transformer-js/src/esmodule-helpers.js":"cHUbl"}],iYdLu:[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"fetchWithDelay",()=>l),o.export(r,"fetchTransactionDetails",()=>c),o.export(r,"findPositionAddress",()=>p),o.export(r,"findWalletAddress",()=>u);var n=e("./api-client"),a=e("./constants"),i=e("./logger");let s=(0,i.createLogger)("Solscan");async function l(e,t,r){let o=new URLSearchParams;o.append("page",t.toString()),o.append("page_size",(0,a.PAGE_SIZE).toString()),o.append("activity_type[]",a.ACTIVITY_TOKEN_ADD_LIQ),o.append("activity_type[]",a.ACTIVITY_TOKEN_REMOVE_LIQ),r.fromTime&&o.append("from_time",r.fromTime.toString()),r.toTime&&o.append("to_time",r.toTime.toString()),r.minValue&&o.append("value[]",r.minValue.toString()),r.maxValue&&o.append("value[]",r.maxValue.toString());let i=o.toString().replace(/%5B%5D/g,"[]"),l=`${(0,a.getSolscanApiUrl)("/v2/account/activity/dextrading")}?address=${e}&${i}`;try{let e=await (0,n.fetchWithRetry)(l,{headers:a.SOLSCAN_HEADERS,method:"GET",credentials:"include"}),t=await e.json();return t}catch(e){throw s.error(`Error fetching page ${t}`,e),Error((0,n.handleApiError)(e))}}async function c(e){let t=`${(0,a.getSolscanApiUrl)("/v2/transaction/detail")}?tx=${e}`;try{let e=await (0,n.fetchWithRetry)(t,{headers:a.SOLSCAN_HEADERS,method:"GET",credentials:"include"}),r=await e.json();return r}catch(t){throw s.error(`Error fetching transaction details for ${e}`,t),Error((0,n.handleApiError)(t))}}function p(e){for(let t of e)if(t.display?.accounts){let e=t.display.accounts.find(e=>e.label===a.POSITION_ACCOUNT_LABEL);if(e)return e.account}return null}function u(e){for(let t of e)if(t.display?.accounts){let e=t.display.accounts.find(e=>e.label===a.SENDER_ACCOUNT_LABEL);if(e)return e.account}return null}},{"./api-client":"6xm77","./constants":"1c1lR","./logger":"2yiHc","@parcel/transformer-js/src/esmodule-helpers.js":"cHUbl"}],"6xm77":[function(e,t,r){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(r),o.export(r,"fetchWithRetry",()=>p),o.export(r,"ERROR_MESSAGES",()=>u),o.export(r,"handleApiError",()=>f),o.export(r,"fetchJson",()=>E),o.export(r,"getCircuitBreakerStatus",()=>d),o.export(r,"resetCircuitBreaker",()=>g);var n=e("./logger"),a=e("./constants");let i=(0,n.createLogger)("ApiClient"),s=new Map;function l(e){let t=new URL(e);return t.host}function c(e,t){let r=s.get(e)||{failures:0,lastFailureTime:0,isOpen:!1};t?(r.failures=0,i.debug(`Success recorded for ${e} - failure count reset`)):(r.failures++,r.lastFailureTime=Date.now(),r.failures>=a.MAX_FAILURES?(r.isOpen=!0,i.warn(`Circuit opened for ${e} - ${r.failures} consecutive failures`)):i.warn(`Failure recorded for ${e} - ${r.failures}/${a.MAX_FAILURES} failures`)),s.set(e,r)}async function p(e,t={}){let r=l(e);if(!function(e){let t=s.get(e)||{failures:0,lastFailureTime:0,isOpen:!1};return!t.isOpen||(Date.now()-t.lastFailureTime>6e4?(t.isOpen=!1,t.failures=0,s.set(e,t),i.info(`Circuit closed for ${e} - attempting recovery`),!0):(i.warn(`Circuit open for ${e} - blocking request`),!1))}(r))throw Error(u.SERVICE_UNAVAILABLE);let o=t.retries??a.MAX_RETRIES,n=t.backoff??a.INITIAL_BACKOFF,p=0;for(;p<=o;)try{i.debug(`Fetching ${e} (attempt ${p+1}/${o+1})`);let n=new AbortController,a=t.timeout?setTimeout(()=>n.abort(),t.timeout):null,s=await fetch(e,{...t,signal:n.signal});if(a&&clearTimeout(a),!s.ok)throw Error(`HTTP error! status: ${s.status}`);return c(r,!0),i.debug(`Successfully fetched from ${e}`),s}catch(a){if(c(r,!1),++p>o){i.error(`Failed to fetch ${e} after ${o+1} attempts`,a);let t=f(a);throw Error(t)}let t=n*Math.pow(2,p-1);i.warn(`Retry ${p} after ${t}ms delay. Error: ${String(a)}`),await new Promise(e=>setTimeout(e,t))}throw Error(u.GENERIC_ERROR)}let u={NETWORK_ERROR:"Network issue. Check your internet connection.",SERVER_ERROR:"Server returned an error. Please try again.",TIMEOUT_ERROR:"Request timed out. Please try again.",SERVICE_UNAVAILABLE:"Service temporarily unavailable. Please try again later.",GENERIC_ERROR:"An unexpected error occurred. Please try again.",RATE_LIMIT_ERROR:"Too many requests. Please wait a moment and try again.",INVALID_RESPONSE:"Invalid response received. Please try again."};function f(e){if(e instanceof Error){let t=e.message.toLowerCase();if(t.includes("http error! status: 429"))return u.RATE_LIMIT_ERROR;if(t.includes("http error! status: 4")||t.includes("http error! status: 5"))return u.SERVER_ERROR;if(t.includes("timeout")||t.includes("aborted"))return u.TIMEOUT_ERROR;if(t.includes("network")||t.includes("fetch"))return u.NETWORK_ERROR;else if(t.includes("service temporarily unavailable"))return u.SERVICE_UNAVAILABLE;else if(t.includes("invalid")||t.includes("parse"))return u.INVALID_RESPONSE}return u.GENERIC_ERROR}async function E(e,t={}){try{let r=await p(e,{...t,headers:{Accept:"application/json",...t.headers}}),o=await r.json();return o}catch(e){throw Error(f(e))}}function d(e){let t;try{t=l(e)}catch{t=e}return s.get(t)||{failures:0,lastFailureTime:0,isOpen:!1}}function g(e){let t;try{t=l(e)}catch{t=e}s.set(t,{failures:0,lastFailureTime:0,isOpen:!1}),i.info(`Manually reset circuit breaker for ${t}`)}},{"./logger":"2yiHc","./constants":"1c1lR","@parcel/transformer-js/src/esmodule-helpers.js":"cHUbl"}]},["3OK12"],"3OK12","parcelRequiredaa9"),globalThis.define=t;